@use "../helpers" as *;

:root {
  --app-bg: #f3f4f6;
  --app-surface: #ffffff;
  --app-surface-muted: #f8fafc;
  --app-border: #e2e8f0;
  --app-text: #1f2937;
  --app-text-muted: #4b5563;
  --app-accent: #1677ff;
  --app-shadow: 0 rem(8) rem(20) rgba(15, 23, 42, 0.08);
  --app-shadow-soft: 0 rem(4) rem(12) rgba(15, 23, 42, 0.06);
}

body {
  background: var(--app-bg);
  color: var(--app-text);
  overflow-x: hidden;
}

.app-layout,
.app-layout__inner,
.app-content,
.page-shell,
.page-shell__stack {
  max-width: 100%;
  overflow-x: hidden;
}

.app-layout {
  background: var(--app-bg);
}

.app-layout__inner {
  background: var(--app-bg);
  min-width: 0;
}

.app-header {
  height: rem(64);
  line-height: rem(64);
  background: var(--app-surface);
  border-bottom: 1px solid var(--app-border);
}

.app-content {
  padding: rem(20);
  background: var(--app-bg);
  min-width: 0;
  overflow: hidden;
}

.app-content--map {
  padding: 0;
  overflow: hidden;
}

.auth-layout {
  background: var(--app-bg);
}

.auth-content {
  display: flex;
  align-items: center;
  justify-content: center;
}

.auth-shell {
  width: 100%;
  max-width: rem(560);
}

.auth-layout .page-shell__stack {
  background: transparent;
  border-color: transparent;
  box-shadow: none;
  padding: 0;
}

.auth-layout .page-shell__card {
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
}

.auth-layout .page-shell__card .ant-card {
  border: 1px solid #e4e9f0;
  box-shadow: 0 rem(10) rem(28) rgba(15, 23, 42, 0.08);
}

.auth-layout .page-shell__card .ant-card-body {
  // padding: rem(24);
}

.auth-layout .page-shell__head {
  text-align: center;
}

.auth-layout .page-shell__head .ant-typography {
  margin-bottom: rem(6);
}

.auth-layout .ant-form-item {
  margin-bottom: rem(14);
}

.auth-layout .ant-form-item-label {
  padding-bottom: rem(4);
}

.auth-layout .ant-form-item-label > label {
  line-height: 1.2;
}

.auth-layout .ant-form-item-control-input {
  min-height: auto;
}

.auth-layout .ant-input,
.auth-layout .ant-input-affix-wrapper,
.auth-layout .ant-input-textarea {
  padding: rem(8) rem(12);
}

.auth-layout .ant-btn {
  height: rem(40);
}

.auth-layout .ant-btn + .ant-btn {
  margin-top: rem(8);
}

.page-shell {
  background: transparent;
}

.page-shell__stack {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.7) 0%,
    rgba(248, 250, 252, 0.9) 100%
  );
  border: 1px solid var(--app-border);
  border-radius: rem(16);
  padding: rem(20);
  box-shadow: var(--app-shadow);
}

.page-shell__head .ant-typography {
  color: var(--app-text);
}

.page-shell__head .ant-typography.ant-typography-secondary {
  color: var(--app-text-muted);
}

.page-shell__card {
  border-color: #d1d9e2;
  box-shadow: var(--app-shadow-soft);
  background: var(--app-surface);
  border-radius: rem(14);
}

.ant-card {
  border-color: var(--app-border);
  border-radius: rem(12);
  box-shadow: var(--app-shadow-soft);
  background: var(--app-surface);
}

.ant-card-head {
  border-bottom: 1px solid var(--app-border);
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
}

.ant-card-body {
  padding: rem(20);
}

.page-shell__card .ant-card {
  border-color: #dbe2ea;
}

.page-shell__card .ant-card + .ant-card {
  margin-top: rem(16);
}

.ant-tag {
  border-radius: rem(999);
  padding: 0 rem(10);
  font-weight: 600;
}

.ant-btn {
  border-radius: rem(10);
}

.ant-btn-primary {
  box-shadow: 0 rem(6) rem(12) rgba(22, 119, 255, 0.2);
}

.ant-typography {
  color: var(--app-text);
}

.ant-typography.ant-typography-secondary {
  color: var(--app-text-muted);
}

.ant-statistic-title {
  color: var(--app-text-muted);
  font-size: rem(12);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.ant-statistic-content {
  color: var(--app-text);
}

.ant-list-item {
  padding-left: 0;
}

.ant-layout-sider {
  background: var(--app-surface);
  border-right: 1px solid var(--app-border);
}

.ant-menu {
  border-right: none;
  padding: rem(8);
}

.ant-menu-item {
  border-radius: rem(10);
  margin: rem(4) 0;
}

.ant-menu-item-selected {
  background: rgba(22, 119, 255, 0.12);
}

.ant-card + .ant-card {
  margin-top: rem(16);
}

.ant-row {
  row-gap: rem(16);
}

.ant-space-vertical > .ant-space-item:not(:last-child) {
  margin-bottom: rem(8);
}

.ant-form-item-label > label {
  color: var(--app-text);
  font-weight: 600;
}

.ant-input,
.ant-input-affix-wrapper,
.ant-input-textarea {
  border-radius: rem(10);
  border-color: var(--app-border);
}

.ant-select-selector {
  border-radius: rem(10) !important;
  border-color: var(--app-border) !important;
}

.ant-empty-description {
  color: var(--app-text-muted);
}

@media (max-width: 768px) {
  .app-content {
    padding: rem(16);
  }

  .ant-card-body {
    padding: rem(16);
  }
}

@include tablet {
  .app-header {
    height: rem(56);
    line-height: rem(56);
  }

  .app-content {
    padding: rem(16);
  }

  .page-shell__stack {
    padding: rem(16);
    border-radius: rem(14);
  }

  .ant-card-body {
    padding: rem(16);
  }
}

@include mobile {
  .app-header {
    height: rem(52);
    line-height: rem(52);
    padding: 0 rem(12);
  }

  .app-content {
    padding: 0;
  }

  .app-content--map {
    padding: 0;
    padding-bottom: 0;
  }

  .page-shell__stack {
    padding: 0;
    border-radius: rem(0);
    border: 0;
    box-shadow: none;
  }

  .home-page .page-shell__stack {
    padding: 0 rem(12) rem(12);
  }

  .ant-space-vertical > .ant-space-item:not(:last-child) {
    margin-bottom: rem(6);
  }

  .ant-card {
    border-radius: rem(10);
  }

  .ant-card-body {
    padding: rem(12);
  }

  .ant-btn {
    width: 100%;
  }

  .ant-btn + .ant-btn {
    margin-top: rem(8);
  }

  .ant-menu {
    padding: rem(6);
  }
}

.mobile-nav {
  display: none;
}

@include mobile {
  .mobile-nav {
    display: block;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1200;
    padding: rem(8) rem(12) rem(12);
  }

  .mobile-nav__inner {
    background: var(--app-surface);
    border: 1px solid var(--app-border);
    border-radius: rem(16);
    box-shadow:
      0 rem(10) rem(24) rgba(15, 23, 42, 0.12),
      0 0 rem(18) rgba(18, 120, 160, 0.2);
    padding: rem(8) rem(12);
    margin: 0 auto;
    max-width: rem(520);
  }

  .mobile-nav__menu {
    display: flex;
    align-items: center;
    gap: rem(8);
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-padding: rem(12);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: rgba(18, 120, 160, 0.45) transparent;
    padding: 0 rem(8) rem(4);
    justify-content: center;
  }

  .mobile-nav__item {
    flex: 0 0 auto;
    min-width: rem(52);
    height: rem(52);
    border: 0;
    background: transparent;
    border-radius: rem(12);
    display: grid;
    place-items: center;
    color: var(--app-text-muted);
    transition:
      background 160ms ease,
      color 160ms ease;
    font-size: rem(20);
    scroll-snap-align: center;
  }

  .mobile-nav__item.is-active {
    color: var(--app-accent);
    background: rgba(22, 119, 255, 0.12);
  }

  .mobile-nav__menu::-webkit-scrollbar {
    height: rem(6);
  }

  .mobile-nav__menu::-webkit-scrollbar-thumb {
    background: rgba(18, 120, 160, 0.45);
    border-radius: rem(999);
  }

  .app-content {
    padding-bottom: rem(84);
  }

  .app-content--map {
    padding-bottom: 0;
  }
}

.map-page {
  height: 100%;
  width: 100%;
}

.map-page__card {
  height: calc(100vh - rem(64));
  width: 100%;
}

.map-page__card .ant-card-body {
  height: 100%;
  padding: 0;
}

.map-page__frame {
  position: relative;
  height: 100%;
}

.map-page__overlay {
  position: absolute;
  top: rem(12);
  left: rem(12);
  z-index: 5;
  max-width: rem(520);
  pointer-events: none;
}

.map-page__overlay .ant-alert {
  box-shadow: var(--app-shadow-soft);
  pointer-events: auto;
}

.map-page__overlay .ant-card {
  box-shadow: var(--app-shadow-soft);
  pointer-events: auto;
}

.map-mini-actions {
  position: absolute;
  top: rem(12);
  right: rem(12);
  z-index: 30;
  display: flex;
  gap: rem(8);
  pointer-events: none;
}

.map-mini-actions__btn {
  width: rem(40);
  height: rem(40);
  border-radius: rem(12);
  border: 1px solid var(--app-border);
  background: var(--app-surface);
  display: grid;
  place-items: center;
  color: var(--app-text);
  box-shadow: var(--app-shadow-soft);
  cursor: pointer;
  pointer-events: auto;
}

.map-mini-actions__btn.is-active {
  color: var(--app-accent);
  border-color: rgba(22, 119, 255, 0.3);
  background: rgba(22, 119, 255, 0.08);
}

.map-mini-panels {
  position: absolute;
  top: rem(60);
  right: rem(12);
  display: flex;
  flex-direction: column;
  gap: rem(12);
  z-index: 25;
  pointer-events: none;
}

.map-mini-panels > * {
  pointer-events: auto;
}

.map-marker-panel {
  position: absolute;
  bottom: rem(14);
  left: rem(256);
  width: min(52vw, rem(540));
  max-height: calc(100% - rem(10));
  z-index: 20;
}

.map-marker-panel__card {
  max-height: calc(100% - rem(24));
  overflow: auto;
}

.map-marker-panel__head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: rem(12);
}

.map-favorites-panel {
  position: relative;
  width: min(28vw, rem(360));
  z-index: 15;
}

.map-favorites-panel__card {
  max-height: calc(100% - rem(24));
  overflow: auto;
}

.map-favorites-panel__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: rem(8);
}

.map-recommendations-panel {
  position: relative;
  width: min(46vw, rem(560));
  z-index: 12;
}

.map-recommendations-panel__card {
  max-height: calc(100% - rem(24));
  overflow: auto;
}

.map-recommendations-panel__card.is-collapsed {
  max-height: none;
}

.map-recommendations-panel__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: rem(8);
  margin-bottom: rem(8);
}

.map-recommendations-panel__card .ant-card-body {
  padding: rem(12);
}

.map-recommendations-panel__card.is-collapsed .ant-card-body {
  padding: rem(8);
}

.map-favorites-panel__card .ant-card-body {
  padding: rem(12);
}

.map-favorites-panel__card.is-collapsed .ant-card-body {
  padding: rem(8);
}

.map-favorites-panel__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: rem(8);
}

.map-recommendations-panel__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: rem(8);
}

.map-recommendations-banner {
  overflow: hidden;
  width: 100%;
}

.map-recommendations-banner__track {
  display: flex;
  gap: rem(16);
  width: max-content;
  animation: recommendations-scroll 24s linear infinite;
}

.map-recommendations-banner__item {
  border: 0;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: rem(6);
  padding: 0;
  cursor: pointer;
}

.map-recommendations-banner__title {
  max-width: rem(220);
  font-size: rem(14);
  line-height: 1.2;
}

@keyframes recommendations-scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

.home-recommendations-banner {
  overflow: hidden;
  width: 100%;
}

.home-recommendations-banner__track {
  display: flex;
  gap: rem(16);
  width: max-content;
  animation: recommendations-scroll 28s linear infinite;
}

.home-recommendations-banner__item {
  display: flex;
  flex-direction: column;
  gap: rem(8);
}

.home-recommendations-banner__title {
  max-width: rem(140);
  font-size: rem(13);
  line-height: 1.2;
}

.map-tools {
  border: 1px solid var(--app-border);
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
}

.map-tools__row {
  width: 100%;
  justify-content: space-between;
}

.map-tools__group .ant-btn {
  min-width: rem(92);
}

@media (max-width: 768px) {
  .map-page__card {
    height: calc(100vh - rem(64));
  }

  .map-mini-actions {
    top: rem(10);
    right: rem(10);
  }

  .map-mini-panels {
    top: rem(56);
    right: rem(10);
    left: auto;
  }

  .map-marker-panel,
  .map-favorites-panel {
    position: absolute;
    left: rem(12);
    right: rem(12);
    width: auto;
    top: rem(12);
  }

  .map-marker-panel {
    z-index: 20;
  }

  .map-favorites-panel {
    z-index: 15;
    top: auto;
    bottom: rem(12);
  }

  .map-recommendations-panel {
    position: relative;
    width: auto;
    z-index: 12;
  }

  .map-marker-panel__head {
    flex-direction: column;
    align-items: flex-start;
  }
}

@include tablet {
  .map-page__card {
    height: calc(100vh - rem(56));
  }
}

@include mobile {
  .map-page__card {
    height: calc(100vh - rem(52));
  }
}
